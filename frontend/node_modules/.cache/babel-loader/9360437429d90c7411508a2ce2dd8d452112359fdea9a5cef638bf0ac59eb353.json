{"ast":null,"code":"var _jsxFileName = \"D:\\\\smart_care-main\\\\frontend\\\\src\\\\pages\\\\AIGeneratedCareSummary.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { useUserData } from '../context/UserDataContext';\n// Material UI imports\nimport Box from '@mui/material/Box';\nimport Paper from '@mui/material/Paper';\nimport Typography from '@mui/material/Typography';\nimport Button from '@mui/material/Button';\nimport Stack from '@mui/material/Stack';\nimport CircularProgress from '@mui/material/CircularProgress';\nimport { motion } from 'framer-motion';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst DELIMITER = '---SECTION---';\nconst AIGeneratedCareSummary = () => {\n  _s();\n  var _selectedProvider$nam, _selectedProvider$spe, _costEstimate$outOfPo, _costEstimate$outOfPo2;\n  const navigate = useNavigate();\n  const {\n    state,\n    dispatch\n  } = useUserData();\n  const {\n    userData,\n    selectedProvider,\n    costEstimate\n  } = state;\n  const [aiSections, setAiSections] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n\n  // Compose the payload for the AI backend\n  const buildPayload = () => {\n    return {\n      patient: {\n        name: userData.name,\n        symptoms: userData.primarySymptoms,\n        duration: userData.duration,\n        urgencyLevel: userData.urgencyLevel,\n        severity: userData.severity,\n        description: userData.detailedDescription,\n        address: userData.address,\n        city: userData.city,\n        state: userData.state,\n        pincode: userData.pincode,\n        insuranceProvider: userData.insuranceProvider,\n        insurancePlan: userData.insurancePlan,\n        memberId: userData.memberId\n      },\n      provider: selectedProvider,\n      appointment: {\n        date: costEstimate === null || costEstimate === void 0 ? void 0 : costEstimate.appointment_time,\n        cost: costEstimate === null || costEstimate === void 0 ? void 0 : costEstimate.outOfPocketCost,\n        basePrice: costEstimate === null || costEstimate === void 0 ? void 0 : costEstimate.basePrice,\n        insuranceCoverage: costEstimate === null || costEstimate === void 0 ? void 0 : costEstimate.coveredAmount\n      }\n    };\n  };\n\n  // Compose the prompt for the AI\n  const buildPrompt = payload => {\n    return `PATIENT INFO:\\n` + `Name: ${payload.patient.name}\\n` + `Symptoms: ${payload.patient.symptoms}\\n` + `Duration: ${payload.patient.duration}\\n` + `Urgency: ${payload.patient.urgencyLevel}\\n` + `Severity: ${payload.patient.severity}\\n` + `Description: ${payload.patient.description}\\n` + `Location: ${payload.patient.address}, ${payload.patient.city}, ${payload.patient.state}, ${payload.patient.pincode}\\n` + `Insurance: ${payload.patient.insuranceProvider} - ${payload.patient.insurancePlan}\\n` + `\\nPROVIDER INFO:\\n` + `Name: ${payload.provider.name}\\n` + `Specialty: ${payload.provider.specialty}\\n` + `Experience: ${payload.provider.experience}\\n` + `Education: ${payload.provider.education}\\n` + `Rating: ${payload.provider.rating}\\n` + `Wait Time: ${payload.provider.wait_time}\\n` + `Address: ${payload.provider.address}\\n` + `Accepted Insurances: ${(payload.provider.accepted_insurances || []).join(', ')}\\n` + `\\nAPPOINTMENT INFO:\\n` + `Date: ${payload.appointment.date}\\n` + `Base Price: $${payload.appointment.basePrice}\\n` + `Insurance Coverage: $${payload.appointment.insuranceCoverage}\\n` + `Final Cost: $${payload.appointment.cost}\\n` + `\\n---\\n` + `Based on all the above information, provide the following sections separated by the delimiter '${DELIMITER}':\\n` + `1. Why this provider is recommended for the patient.\\n` + `2. What to expect during the visit.\\n` + `3. Preparation tips for the patient.\\n` + `Each section should be clear, friendly, and actionable.\\n` + `Format:\\nWhy this provider?${DELIMITER}What to expect?${DELIMITER}Preparation tips.`;\n  };\n\n  // Fetch AI summary on load or when relevant info changes\n  useEffect(() => {\n    let ignore = false;\n    const fetchSummary = async () => {\n      setLoading(true);\n      setError('');\n      setAiSections(null);\n      try {\n        var _parts$, _parts$2;\n        const prompt = `\nGiven the following patient and provider information, answer in two sections:\n1. Why is this provider suitable for the patient?\n2. What can the patient expect from the visit?\n\nPATIENT INFO:\nSymptoms: ${userData.primarySymptoms}\nInsurance: ${userData.insuranceProvider} - ${userData.insurancePlan}\n\nPROVIDER INFO:\nName: ${selectedProvider.name}\nSpecialty: ${selectedProvider.specialty}\nAccepted Insurances: ${(selectedProvider.accepted_insurances || []).join(', ')}\nExperience: ${selectedProvider.experience}\nEducation: ${selectedProvider.education}\nRating: ${selectedProvider.rating}\nWait Time: ${selectedProvider.wait_time}\nAddress: ${selectedProvider.address}\n\nPlease answer in two sections, separated by '---SECTION---':\nSection 1: Why this provider?\nSection 2: What to expect?\n      `;\n        const response = await fetch('http://localhost:8000/api/ai/gemini-care-tips/', {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify({\n            provider_name: selectedProvider.name,\n            specialty: selectedProvider.specialty,\n            question: prompt\n          })\n        });\n        if (!response.ok) {\n          let errorMsg = 'Failed to generate summary.';\n          try {\n            const errorData = await response.json();\n            errorMsg = errorData.detail || errorMsg;\n          } catch {}\n          throw new Error(errorMsg);\n        }\n        const data = await response.json();\n        const parts = (data.tips || '').split('---SECTION---');\n        setAiSections({\n          why: ((_parts$ = parts[0]) === null || _parts$ === void 0 ? void 0 : _parts$.trim()) || '',\n          expect: ((_parts$2 = parts[1]) === null || _parts$2 === void 0 ? void 0 : _parts$2.trim()) || ''\n        });\n      } catch (err) {\n        setError('Failed to generate summary. Please try again.');\n      } finally {\n        if (!ignore) setLoading(false);\n      }\n    };\n    if (selectedProvider && userData) {\n      fetchSummary();\n    }\n    return () => {\n      ignore = true;\n    };\n  }, [userData, selectedProvider]);\n  const handleConfirmBooking = async () => {\n    try {\n      const user = state.user;\n      if (!user || !user.id) {\n        alert('Please login first');\n        navigate('/login');\n        return;\n      }\n      const bookingData = {\n        user_id: user.id,\n        provider_id: selectedProvider._id,\n        appointment_time: (costEstimate === null || costEstimate === void 0 ? void 0 : costEstimate.appointment_time) || new Date().toISOString(),\n        status: \"confirmed\",\n        outOfPocketCost: costEstimate === null || costEstimate === void 0 ? void 0 : costEstimate.outOfPocketCost\n      };\n      const response = await fetch('http://127.0.0.1:8000/api/bookings/confirm', {\n        method: 'PUT',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${localStorage.getItem('access_token')}`\n        },\n        body: JSON.stringify(bookingData)\n      });\n      if (!response.ok) {\n        const errorData = await response.json();\n        throw new Error(errorData.detail || 'Failed to confirm booking');\n      }\n      const result = await response.json();\n      dispatch({\n        type: 'SET_COST_ESTIMATE',\n        payload: costEstimate\n      });\n      dispatch({\n        type: 'SET_BOOKING_DATA',\n        payload: bookingData\n      });\n      const bookingsRes = await fetch(`http://127.0.0.1:8000/api/bookings/user/${user.id}`);\n      if (bookingsRes.ok) {\n        const bookings = await bookingsRes.json();\n        dispatch({\n          type: 'SET_UPCOMING_APPOINTMENTS',\n          payload: bookings\n        });\n      }\n      navigate('/confirmation');\n    } catch (error) {\n      alert('Failed to confirm booking: ' + error.message);\n    }\n  };\n  if (!selectedProvider || !costEstimate) {\n    return /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        minHeight: '100vh',\n        background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n        p: 3\n      },\n      children: /*#__PURE__*/_jsxDEV(Paper, {\n        elevation: 6,\n        sx: {\n          background: 'rgba(255,255,255,0.95)',\n          borderRadius: 4,\n          p: 5,\n          maxWidth: 500,\n          width: '100%',\n          textAlign: 'center',\n          boxShadow: '0 20px 40px rgba(0, 0, 0, 0.1)',\n          border: '1px solid rgba(255, 255, 255, 0.2)'\n        },\n        children: [/*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            width: 60,\n            height: 60,\n            background: 'linear-gradient(135deg, #dc3545 0%, #c82333 100%)',\n            borderRadius: 2,\n            display: 'flex',\n            alignItems: 'center',\n            justifyContent: 'center',\n            fontSize: 28,\n            color: 'white',\n            fontWeight: 'bold',\n            boxShadow: 3,\n            mx: 'auto',\n            mb: 3\n          },\n          children: \"\\u26A0\\uFE0F\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 198,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"h6\",\n          sx: {\n            color: '#333',\n            mb: 2,\n            fontWeight: 700\n          },\n          children: \"Missing or invalid care summary data\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 201,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n          sx: {\n            color: '#666',\n            mb: 3\n          },\n          children: \"We couldn't load your personalized care summary. Please return to the previous step and try again.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"contained\",\n          color: \"primary\",\n          onClick: () => navigate('/cost-estimate'),\n          children: \"Back to Estimate\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 203,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(Box, {\n    sx: {\n      minHeight: '100vh',\n      background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',\n      p: 3\n    },\n    children: /*#__PURE__*/_jsxDEV(motion.div, {\n      initial: {\n        opacity: 0,\n        scale: 0.96\n      },\n      animate: {\n        opacity: 1,\n        scale: 1\n      },\n      transition: {\n        duration: 0.7,\n        ease: 'easeOut'\n      },\n      style: {\n        maxWidth: 800,\n        margin: '0 auto'\n      },\n      children: /*#__PURE__*/_jsxDEV(Paper, {\n        elevation: 6,\n        sx: {\n          background: 'rgba(255,255,255,0.95)',\n          borderRadius: 4,\n          p: 5,\n          maxWidth: 800,\n          mx: 'auto',\n          boxShadow: '0 20px 40px rgba(0, 0, 0, 0.1)',\n          border: '1px solid rgba(255, 255, 255, 0.2)'\n        },\n        children: [/*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"h4\",\n          sx: {\n            mb: 4,\n            color: '#333',\n            fontWeight: 700\n          },\n          children: \"Your Personalized Care Summary\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 220,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Paper, {\n          sx: {\n            background: '#f8f9fa',\n            p: 3,\n            borderRadius: 2,\n            mb: 4\n          },\n          elevation: 0,\n          children: [/*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"h6\",\n            sx: {\n              mb: 2\n            },\n            children: \"Appointment Overview\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 222,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Provider:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 223,\n              columnNumber: 25\n            }, this), \" \", (_selectedProvider$nam = selectedProvider === null || selectedProvider === void 0 ? void 0 : selectedProvider.name) !== null && _selectedProvider$nam !== void 0 ? _selectedProvider$nam : '']\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 223,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Specialty:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 224,\n              columnNumber: 25\n            }, this), \" \", (_selectedProvider$spe = selectedProvider === null || selectedProvider === void 0 ? void 0 : selectedProvider.specialty) !== null && _selectedProvider$spe !== void 0 ? _selectedProvider$spe : '']\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 224,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Date:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 225,\n              columnNumber: 25\n            }, this), \" \", costEstimate !== null && costEstimate !== void 0 && costEstimate.appointment_time ? new Date(costEstimate.appointment_time).toLocaleDateString() : '']\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 225,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Estimated Cost:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 226,\n              columnNumber: 25\n            }, this), \" $\", (_costEstimate$outOfPo = costEstimate === null || costEstimate === void 0 ? void 0 : (_costEstimate$outOfPo2 = costEstimate.outOfPocketCost) === null || _costEstimate$outOfPo2 === void 0 ? void 0 : _costEstimate$outOfPo2.toFixed(2)) !== null && _costEstimate$outOfPo !== void 0 ? _costEstimate$outOfPo : '']\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 226,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 221,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"h5\",\n          sx: {\n            color: '#333',\n            mb: 3\n          },\n          children: \"\\uD83E\\uDD16 AI Analysis\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 228,\n          columnNumber: 11\n        }, this), loading ? /*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            display: 'flex',\n            alignItems: 'center',\n            justifyContent: 'center',\n            minHeight: 120\n          },\n          children: [/*#__PURE__*/_jsxDEV(CircularProgress, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 231,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            sx: {\n              ml: 2\n            },\n            children: \"Generating your care summary...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 232,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 230,\n          columnNumber: 13\n        }, this) : error ? /*#__PURE__*/_jsxDEV(Typography, {\n          color: \"error\",\n          sx: {\n            mt: 2\n          },\n          children: error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 235,\n          columnNumber: 13\n        }, this) : aiSections ? /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(Box, {\n            mb: 3,\n            children: [/*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"h6\",\n              sx: {\n                color: '#3366cc',\n                mb: 1\n              },\n              children: \"Why This Provider?\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 239,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Paper, {\n              sx: {\n                background: '#e3f0ff',\n                p: 2,\n                borderRadius: 2,\n                color: '#222'\n              },\n              elevation: 0,\n              children: aiSections === null || aiSections === void 0 ? void 0 : aiSections.why\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 240,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 238,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Box, {\n            mb: 3,\n            children: [/*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"h6\",\n              sx: {\n                color: '#28a745',\n                mb: 1\n              },\n              children: \"What to Expect\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 245,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Paper, {\n              sx: {\n                background: '#e8f5e9',\n                p: 2,\n                borderRadius: 2,\n                color: '#222'\n              },\n              elevation: 0,\n              children: aiSections === null || aiSections === void 0 ? void 0 : aiSections.expect\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 246,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 244,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Box, {\n            mb: 4,\n            children: [/*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"h6\",\n              sx: {\n                color: '#ff9800',\n                mb: 1\n              },\n              children: \"Preparation Tips\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 251,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Paper, {\n              sx: {\n                background: '#fff8e1',\n                p: 2,\n                borderRadius: 2,\n                color: '#222'\n              },\n              elevation: 0\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 252,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 250,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true) : null, /*#__PURE__*/_jsxDEV(Stack, {\n          direction: {\n            xs: 'column',\n            sm: 'row'\n          },\n          spacing: 2,\n          justifyContent: \"flex-end\",\n          mt: 4,\n          children: [/*#__PURE__*/_jsxDEV(Button, {\n            variant: \"outlined\",\n            color: \"primary\",\n            onClick: () => navigate('/cost-estimate'),\n            sx: {\n              borderRadius: 2,\n              fontWeight: 600\n            },\n            children: \"Back to Estimate\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 259,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"contained\",\n            color: \"primary\",\n            onClick: handleConfirmBooking,\n            sx: {\n              borderRadius: 2,\n              fontWeight: 600,\n              flex: 1\n            },\n            children: \"Confirm & Book\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 267,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 258,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 213,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 212,\n    columnNumber: 5\n  }, this);\n};\n_s(AIGeneratedCareSummary, \"M8za6OajH9aOpxlmmQ2/yVnIFZs=\", false, function () {\n  return [useNavigate, useUserData];\n});\n_c = AIGeneratedCareSummary;\nexport default AIGeneratedCareSummary;\nvar _c;\n$RefreshReg$(_c, \"AIGeneratedCareSummary\");","map":{"version":3,"names":["React","useEffect","useState","useNavigate","useUserData","Box","Paper","Typography","Button","Stack","CircularProgress","motion","jsxDEV","_jsxDEV","Fragment","_Fragment","DELIMITER","AIGeneratedCareSummary","_s","_selectedProvider$nam","_selectedProvider$spe","_costEstimate$outOfPo","_costEstimate$outOfPo2","navigate","state","dispatch","userData","selectedProvider","costEstimate","aiSections","setAiSections","loading","setLoading","error","setError","buildPayload","patient","name","symptoms","primarySymptoms","duration","urgencyLevel","severity","description","detailedDescription","address","city","pincode","insuranceProvider","insurancePlan","memberId","provider","appointment","date","appointment_time","cost","outOfPocketCost","basePrice","insuranceCoverage","coveredAmount","buildPrompt","payload","specialty","experience","education","rating","wait_time","accepted_insurances","join","ignore","fetchSummary","_parts$","_parts$2","prompt","response","fetch","method","headers","body","JSON","stringify","provider_name","question","ok","errorMsg","errorData","json","detail","Error","data","parts","tips","split","why","trim","expect","err","handleConfirmBooking","user","id","alert","bookingData","user_id","provider_id","_id","Date","toISOString","status","localStorage","getItem","result","type","bookingsRes","bookings","message","sx","minHeight","background","display","alignItems","justifyContent","p","children","elevation","borderRadius","maxWidth","width","textAlign","boxShadow","border","height","fontSize","color","fontWeight","mx","mb","fileName","_jsxFileName","lineNumber","columnNumber","variant","onClick","div","initial","opacity","scale","animate","transition","ease","style","margin","toLocaleDateString","toFixed","ml","mt","direction","xs","sm","spacing","flex","_c","$RefreshReg$"],"sources":["D:/smart_care-main/frontend/src/pages/AIGeneratedCareSummary.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { useUserData } from '../context/UserDataContext';\n// Material UI imports\nimport Box from '@mui/material/Box';\nimport Paper from '@mui/material/Paper';\nimport Typography from '@mui/material/Typography';\nimport Button from '@mui/material/Button';\nimport Stack from '@mui/material/Stack';\nimport CircularProgress from '@mui/material/CircularProgress';\nimport { motion } from 'framer-motion';\n\nconst DELIMITER = '---SECTION---';\n\nconst AIGeneratedCareSummary = () => {\n  const navigate = useNavigate();\n  const { state, dispatch } = useUserData();\n  const { userData, selectedProvider, costEstimate } = state;\n  const [aiSections, setAiSections] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n\n  // Compose the payload for the AI backend\n  const buildPayload = () => {\n    return {\n      patient: {\n        name: userData.name,\n        symptoms: userData.primarySymptoms,\n        duration: userData.duration,\n        urgencyLevel: userData.urgencyLevel,\n        severity: userData.severity,\n        description: userData.detailedDescription,\n        address: userData.address,\n        city: userData.city,\n        state: userData.state,\n        pincode: userData.pincode,\n        insuranceProvider: userData.insuranceProvider,\n        insurancePlan: userData.insurancePlan,\n        memberId: userData.memberId\n      },\n      provider: selectedProvider,\n      appointment: {\n        date: costEstimate?.appointment_time,\n        cost: costEstimate?.outOfPocketCost,\n        basePrice: costEstimate?.basePrice,\n        insuranceCoverage: costEstimate?.coveredAmount\n      }\n    };\n  };\n\n  // Compose the prompt for the AI\n  const buildPrompt = (payload) => {\n    return (\n      `PATIENT INFO:\\n` +\n      `Name: ${payload.patient.name}\\n` +\n      `Symptoms: ${payload.patient.symptoms}\\n` +\n      `Duration: ${payload.patient.duration}\\n` +\n      `Urgency: ${payload.patient.urgencyLevel}\\n` +\n      `Severity: ${payload.patient.severity}\\n` +\n      `Description: ${payload.patient.description}\\n` +\n      `Location: ${payload.patient.address}, ${payload.patient.city}, ${payload.patient.state}, ${payload.patient.pincode}\\n` +\n      `Insurance: ${payload.patient.insuranceProvider} - ${payload.patient.insurancePlan}\\n` +\n      `\\nPROVIDER INFO:\\n` +\n      `Name: ${payload.provider.name}\\n` +\n      `Specialty: ${payload.provider.specialty}\\n` +\n      `Experience: ${payload.provider.experience}\\n` +\n      `Education: ${payload.provider.education}\\n` +\n      `Rating: ${payload.provider.rating}\\n` +\n      `Wait Time: ${payload.provider.wait_time}\\n` +\n      `Address: ${payload.provider.address}\\n` +\n      `Accepted Insurances: ${(payload.provider.accepted_insurances || []).join(', ')}\\n` +\n      `\\nAPPOINTMENT INFO:\\n` +\n      `Date: ${payload.appointment.date}\\n` +\n      `Base Price: $${payload.appointment.basePrice}\\n` +\n      `Insurance Coverage: $${payload.appointment.insuranceCoverage}\\n` +\n      `Final Cost: $${payload.appointment.cost}\\n` +\n      `\\n---\\n` +\n      `Based on all the above information, provide the following sections separated by the delimiter '${DELIMITER}':\\n` +\n      `1. Why this provider is recommended for the patient.\\n` +\n      `2. What to expect during the visit.\\n` +\n      `3. Preparation tips for the patient.\\n` +\n      `Each section should be clear, friendly, and actionable.\\n` +\n      `Format:\\nWhy this provider?${DELIMITER}What to expect?${DELIMITER}Preparation tips.`\n    );\n  };\n\n  // Fetch AI summary on load or when relevant info changes\n  useEffect(() => {\n    let ignore = false;\n    const fetchSummary = async () => {\n      setLoading(true);\n      setError('');\n      setAiSections(null);\n      try {\n        const prompt = `\nGiven the following patient and provider information, answer in two sections:\n1. Why is this provider suitable for the patient?\n2. What can the patient expect from the visit?\n\nPATIENT INFO:\nSymptoms: ${userData.primarySymptoms}\nInsurance: ${userData.insuranceProvider} - ${userData.insurancePlan}\n\nPROVIDER INFO:\nName: ${selectedProvider.name}\nSpecialty: ${selectedProvider.specialty}\nAccepted Insurances: ${(selectedProvider.accepted_insurances || []).join(', ')}\nExperience: ${selectedProvider.experience}\nEducation: ${selectedProvider.education}\nRating: ${selectedProvider.rating}\nWait Time: ${selectedProvider.wait_time}\nAddress: ${selectedProvider.address}\n\nPlease answer in two sections, separated by '---SECTION---':\nSection 1: Why this provider?\nSection 2: What to expect?\n      `;\n      const response = await fetch('http://localhost:8000/api/ai/gemini-care-tips/', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          provider_name: selectedProvider.name,\n          specialty: selectedProvider.specialty,\n          question: prompt\n        })\n      });\n      if (!response.ok) {\n        let errorMsg = 'Failed to generate summary.';\n        try {\n          const errorData = await response.json();\n          errorMsg = errorData.detail || errorMsg;\n        } catch {}\n        throw new Error(errorMsg);\n      }\n      const data = await response.json();\n      const parts = (data.tips || '').split('---SECTION---');\n      setAiSections({\n        why: parts[0]?.trim() || '',\n        expect: parts[1]?.trim() || ''\n      });\n    } catch (err) {\n      setError('Failed to generate summary. Please try again.');\n    } finally {\n      if (!ignore) setLoading(false);\n    }\n  };\n  if (selectedProvider && userData) {\n    fetchSummary();\n  }\n  return () => { ignore = true; };\n}, [userData, selectedProvider]);\n\n  const handleConfirmBooking = async () => {\n    try {\n      const user = state.user;\n      if (!user || !user.id) {\n        alert('Please login first');\n        navigate('/login');\n        return;\n      }\n      const bookingData = {\n        user_id: user.id,\n        provider_id: selectedProvider._id,\n        appointment_time: costEstimate?.appointment_time || new Date().toISOString(),\n        status: \"confirmed\",\n        outOfPocketCost: costEstimate?.outOfPocketCost\n      };\n      const response = await fetch('http://127.0.0.1:8000/api/bookings/confirm', {\n        method: 'PUT',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${localStorage.getItem('access_token')}`,\n        },\n        body: JSON.stringify(bookingData)\n      });\n      if (!response.ok) {\n        const errorData = await response.json();\n        throw new Error(errorData.detail || 'Failed to confirm booking');\n      }\n      const result = await response.json();\n      dispatch({ type: 'SET_COST_ESTIMATE', payload: costEstimate });\n      dispatch({ type: 'SET_BOOKING_DATA', payload: bookingData });\n      const bookingsRes = await fetch(`http://127.0.0.1:8000/api/bookings/user/${user.id}`);\n      if (bookingsRes.ok) {\n        const bookings = await bookingsRes.json();\n        dispatch({ type: 'SET_UPCOMING_APPOINTMENTS', payload: bookings });\n      }\n      navigate('/confirmation');\n    } catch (error) {\n      alert('Failed to confirm booking: ' + error.message);\n    }\n  };\n\n  if (!selectedProvider || !costEstimate) {\n    return (\n      <Box sx={{ minHeight: '100vh', background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)', display: 'flex', alignItems: 'center', justifyContent: 'center', p: 3 }}>\n        <Paper elevation={6} sx={{ background: 'rgba(255,255,255,0.95)', borderRadius: 4, p: 5, maxWidth: 500, width: '100%', textAlign: 'center', boxShadow: '0 20px 40px rgba(0, 0, 0, 0.1)', border: '1px solid rgba(255, 255, 255, 0.2)' }}>\n          <Box sx={{ width: 60, height: 60, background: 'linear-gradient(135deg, #dc3545 0%, #c82333 100%)', borderRadius: 2, display: 'flex', alignItems: 'center', justifyContent: 'center', fontSize: 28, color: 'white', fontWeight: 'bold', boxShadow: 3, mx: 'auto', mb: 3 }}>\n            ⚠️\n          </Box>\n          <Typography variant=\"h6\" sx={{ color: '#333', mb: 2, fontWeight: 700 }}>Missing or invalid care summary data</Typography>\n          <Typography sx={{ color: '#666', mb: 3 }}>We couldn't load your personalized care summary. Please return to the previous step and try again.</Typography>\n          <Button variant=\"contained\" color=\"primary\" onClick={() => navigate('/cost-estimate')}>\n            Back to Estimate\n          </Button>\n        </Paper>\n      </Box>\n    );\n  }\n\n  return (\n    <Box sx={{ minHeight: '100vh', background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)', p: 3 }}>\n      <motion.div\n        initial={{ opacity: 0, scale: 0.96 }}\n        animate={{ opacity: 1, scale: 1 }}\n        transition={{ duration: 0.7, ease: 'easeOut' }}\n        style={{ maxWidth: 800, margin: '0 auto' }}\n      >\n        <Paper elevation={6} sx={{ background: 'rgba(255,255,255,0.95)', borderRadius: 4, p: 5, maxWidth: 800, mx: 'auto', boxShadow: '0 20px 40px rgba(0, 0, 0, 0.1)', border: '1px solid rgba(255, 255, 255, 0.2)' }}>\n          <Typography variant=\"h4\" sx={{ mb: 4, color: '#333', fontWeight: 700 }}>Your Personalized Care Summary</Typography>\n          <Paper sx={{ background: '#f8f9fa', p: 3, borderRadius: 2, mb: 4 }} elevation={0}>\n            <Typography variant=\"h6\" sx={{ mb: 2 }}>Appointment Overview</Typography>\n            <Typography><strong>Provider:</strong> {selectedProvider?.name ?? ''}</Typography>\n            <Typography><strong>Specialty:</strong> {selectedProvider?.specialty ?? ''}</Typography>\n            <Typography><strong>Date:</strong> {costEstimate?.appointment_time ? new Date(costEstimate.appointment_time).toLocaleDateString() : ''}</Typography>\n            <Typography><strong>Estimated Cost:</strong> ${costEstimate?.outOfPocketCost?.toFixed(2) ?? ''}</Typography>\n          </Paper>\n          <Typography variant=\"h5\" sx={{ color: '#333', mb: 3 }}>🤖 AI Analysis</Typography>\n          {loading ? (\n            <Box sx={{ display: 'flex', alignItems: 'center', justifyContent: 'center', minHeight: 120 }}>\n              <CircularProgress />\n              <Typography sx={{ ml: 2 }}>Generating your care summary...</Typography>\n            </Box>\n          ) : error ? (\n            <Typography color=\"error\" sx={{ mt: 2 }}>{error}</Typography>\n          ) : aiSections ? (\n            <>\n              <Box mb={3}>\n                <Typography variant=\"h6\" sx={{ color: '#3366cc', mb: 1 }}>Why This Provider?</Typography>\n                <Paper sx={{ background: '#e3f0ff', p: 2, borderRadius: 2, color: '#222' }} elevation={0}>\n                  {aiSections?.why}\n                </Paper>\n              </Box>\n              <Box mb={3}>\n                <Typography variant=\"h6\" sx={{ color: '#28a745', mb: 1 }}>What to Expect</Typography>\n                <Paper sx={{ background: '#e8f5e9', p: 2, borderRadius: 2, color: '#222' }} elevation={0}>\n                  {aiSections?.expect}\n                </Paper>\n              </Box>\n              <Box mb={4}>\n                <Typography variant=\"h6\" sx={{ color: '#ff9800', mb: 1 }}>Preparation Tips</Typography>\n                <Paper sx={{ background: '#fff8e1', p: 2, borderRadius: 2, color: '#222' }} elevation={0}>\n                  {/* This section is no longer generated by the AI, so it's empty */}\n                </Paper>\n              </Box>\n            </>\n          ) : null}\n          <Stack direction={{ xs: 'column', sm: 'row' }} spacing={2} justifyContent=\"flex-end\" mt={4}>\n            <Button\n              variant=\"outlined\"\n              color=\"primary\"\n              onClick={() => navigate('/cost-estimate')}\n              sx={{ borderRadius: 2, fontWeight: 600 }}\n            >\n              Back to Estimate\n            </Button>\n            <Button\n              variant=\"contained\"\n              color=\"primary\"\n              onClick={handleConfirmBooking}\n              sx={{ borderRadius: 2, fontWeight: 600, flex: 1 }}\n            >\n              Confirm & Book\n            </Button>\n          </Stack>\n        </Paper>\n      </motion.div>\n    </Box>\n  );\n};\n\nexport default AIGeneratedCareSummary; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}